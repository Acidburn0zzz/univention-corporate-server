// Special style for sites where the page itself should not scroll
// but only the components of the site e.g. Tree widgets.
// Only tested for search page of udm/navigation and search page of uvmm/uvmm

@import "variables"

body
	overflow: hidden

#umcTopContainer
	position: absolute
	top: 0
	bottom: 0
	left: 0
	right: 0

.umcHeader
	z-index: 2
	border-bottom: 1px solid $grey-medium
	background-color: $grey-lightest

.umcHeader
	position: relative
	top: 0
	left: 0
	right: 0

.umcMainTabContainer
	position: absolute
	top: 48px
	bottom: 0
	left: 0
	right: 0
	overflow-y: auto

// TODO whitelist this for all modules
.umcGrid,
.umcGridTile,
.umcGridTree
	.dgrid
		height: auto
		max-height: 30em
		display: flex
		flex-direction: column
		.dgrid-scroller
			position: relative
			overflow-y: auto
			overflow-x: hidden
			// height: 100%



@media (min-height: 750px)
	.umcModule.scrollIsNotAtTop .umcModuleHeader
		border-bottom: 1px solid $grey-medium

	.umcModuleWrapperWrapper
		overflow-y: auto
		overflow-x: hidden

	.umcMainTabContainer > .dijitStackContainerChildWrapper
		height: 100%

	.umcModule
		height: 100%
		display: flex // TODO wouldn't be needed if module header has fixed height. May be a performance consideration
		flex-direction: column

	.umcModuleWrapperWrapper
		min-height: 0
		height: 100%

	#umcTopContainer.backup // scrollless basis
		position: absolute
		top: 0
		bottom: 0
		left: 0
		right: 0

		.umcHeader
			position: relative

		.umcMainTabContainer
			position: absolute
			top: 48px
			bottom: 0
			left: 0
			right: 0

			> .dijitStackContainerChildWrapper
				height: 100%

		.umcModule
			height: 100%
			display: flex // TODO wouldn't be needed if module header has fixed height. May be a performance consideration
			flex-direction: column

		.umcModuleWrapperWrapper
			min-height: 0
			height: 100%

	// TODO this could theoretically be put into 'basis'
	// scrollless: fixed module header
	#umcTopContainer.backup // migrate into basis
		.umcModuleHeader
			position: relative
			z-index: 1
		.umcModule.scrollIsNotAtTop .umcModuleHeader
			border-bottom: 1px solid $grey-medium

		.umcModuleWrapperWrapper
			overflow-y: auto
			overflow-x: hidden

	// TODO this has duplicated style with UDM. find a basis
	// scrollless: basic page with one main grid
	// #umcTopContainer.scrollless-appcenter-packages,
	// #umcTopContainer.scrollless-top,
	// #umcTopContainer.scrollless-services,
	// #umcTopContainer.scrollless-ucr
	@media (min-height: 750px) and (min-width: $xs-min)
		#umcTopContainer.scrollless-quota-overviewpage,
		#umcTopContainer.scrollless-quota-partitionpage,
		#umcTopContainer.scrollless-join-statuspage,
		#umcTopContainer.scrollless-top,
		#umcTopContainer.scrollless-services,
		#umcTopContainer.scrollless-ucr,
		#umcTopContainer.scrollless-appcenter-packages
			.umcGrid .dgrid
				max-height: none
			.umcGridTree .dgrid
				max-height: none

			.umcModuleWrapper,
			.umcModuleContent,
			.umcModuleContentChildWrapper,
			.umcPage
				height: 100%

			.umcPage
				display: flex
				&.umcPage-fullWidth
					flex-direction: column

				.umcPageNav
					flex: 1 0 auto // prevent shrinking
					padding-bottom: 16px
					margin-bottom: 8px
				&.umcPage-fullWidth .umcPageNav
					padding-bottom: 0

				.umcPageMain
					height: 100%
					padding-bottom: 16px

				.umcPageFooter
					display: none

				.umcGrid
					max-height: 100%
					display: flex
					flex-direction: column

					^[-2].scrollless-ie ^[-2..-1]
						height: 100%

	// UDM searchpage
	@media (min-height: 750px)
		#umcTopContainer.scrollless-udm-searchpage,
		#umcTopContainer.scrollless-uvmm-searchpage
			.umcGrid,
			.umcGridTile,
			.umcGridTree
				.dgrid
					max-height: none

			.umcModuleWrapper,
			.umcModuleContent,
			.umcModuleContentChildWrapper,
			.umcPage
				height: 100%

			.umcPage
				display: flex
				&.umcPage-fullWidth
					flex-direction: column

				.umcPageNav
					flex: 1 0 auto // prevent shrinking
					padding-bottom: 16px
				&.umcPage-fullWidth .umcPageNav
					padding-bottom: 0

				.umcPageMain
					width: 100%
					height: 100%
					padding-bottom: 16px

				.umcPageFooter
					display: none

				.umcGrid,
				.umcGridTile,
				.umcGridTree
					max-height: 100%
					min-height: 0
					display: flex
					flex-direction: column

					^[-2].scrollless-ie ^[-2..-1]
						height: 100%

		// styling for UDM modules with trees
		@media (max-width: $sm-max)
			#umcTopContainer.scrollless-udm-searchpage.scrollless-udm-navigation,
			#umcTopContainer.scrollless-udm-searchpage.scrollless-udm-dhcp-dhcp,
			#umcTopContainer.scrollless-udm-searchpage.scrollless-udm-dns-dns,
			#umcTopContainer.scrollless-uvmm-searchpage
				.umcGridTree .dgrid
				.umcGrid,
				.umcGridTile,
				.umcGridTree
					.dgrid
						max-height: 30em

				.umcModuleWrapper,
				.umcModuleContent,
				.umcModuleContentChildWrapper,
				.umcPage
					height: auto

				.umcPage
					flex-direction: column


	@media (min-width: $md-min)
		#umcTopContainer.scrollless-udm-detailpage,
		#umcTopContainer.scrollless-uvmm-domainpage
			.umcModuleWrapper
				height: 100%

				.umcModuleContent,
				.umcModuleContentChildWrapper,
				.umcPage,
				.umcUDMDetailForm,
				.umcUDMDetailForm > div,
				.umcUDMDetailForm > div > div,
				.umcUDMDetailForm > div > div > div,
				.umcUDMDetailForm .umcPage,
				.dijitStackContainer,
				.dijitStackContainerChildWrapper
					height: 100%

				.umcPage
					.umcPageMain
						height: 100%
						overflow-y: auto

		// TODO could theoretically be put in generic UDM searchpage
		#umcTopContainer.scrollless-udm-searchpage.scrollless-udm-navigation,
		#umcTopContainer.scrollless-udm-searchpage.scrollless-udm-dhcp-dhcp,
		#umcTopContainer.scrollless-udm-searchpage.scrollless-udm-dns-dns,
		#umcTopContainer.scrollless-uvmm-searchpage
			.umcPage
				.umcPageMain
					display: flex
					flex-direction: column






	@media (min-width: $sm-min)
		.notnow.scrollless-overview
			#umcOverviewPage
				height: 100%

				.umcPageMain
					height: 100%

					display: flex
					flex-direction: column

					.umcOverviewPane
						// min-height: 0% // TODO firefox?
						height: 100%
						transition: background-color 0.2s, box-shadow 0.2s

						&.umcOverviewPaneOverflown
							material-shadow(1)
							background-color: rgba(0, 0, 0, 0.02)

				.umcPageFooter // TODO move to Page.js noFooter boolean or main.js OverviewPage creation
					display: none
