<svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" id="svg2985" width="646.719" height="444.969" content="%3Cmxfile%20userAgent%3D%22Mozilla%2F5.0%20(X11%3B%20Linux%20x86_64)%20AppleWebKit%2F537.36%20(KHTML%2C%20like%20Gecko)%20Chrome%2F47.0.2508.0%20Safari%2F537.36%22%20type%3D%22device%22%3E%3Cdiagram%3E7Vrtb6M4E%2F9rIt1zUiMIzdvHpOnTPWlXqtSt9u5T5AQnoAXMgdNN76%2FfMXjA2JBXru3qyIeEjD3jwfP280DPuQv3DwmJvS%2FMpUFvYLn7nrPoDQb21LHgR1Bec8pwOs4J28R35aSS8OT%2FQyVR8m13vkvTykTOWMD9uEpcsyiia16hbVhQXSImWxRfEp7WJDCp33yXezl1MhiV9E%2FU33q4jD2a5iMpf0UZLt2QXcBvMhKMieGQoKzsrpx72LGEMRAjrsL9HQ3EruGG5Lf%2B%2F4bRQsmERlKRwwxSiRcS7KSOszVniaF56pFYXO7CIJ%2FgzF9own3Yn89kRYNHlvrcZxFMWTHOWahMmAX%2BVgxwFgPV42EAf2y4lGvDNIo%2BYeqfkaTyD5SFlCevMAUZpCtID7LRpX6UJkKSp1hnJGlEOsq2EFzuFVzI7arfOml4Zes2CYs4jVygPv%2FRG4wCWG3u%2Bi9wuRWXv5FMwPPdE3wnLKDp%2F3AWLKZMrOFF0gpsU6V0rB3rEVYtmJUQjJkf8SwIhvPecCEoNPEhFiiE%2BIIl3GNbFpHgsaS2Era31bjFeFTCFiNbDdsilq%2BJW1ljlLj99PXrI1CAMaEp5Yf2S89pRbKDsJ8lCfshaAFbf89IoNmfQLDwz1%2F4Z%2B9zMSAkiuuM3ne0jxxUtj5jztWjrlauOEm2oLuamgx7wF2xXbKWjFnubzTRjdW%2FHY0lmzQTSkloQLj%2FUlWgziZS%2BqPwslK0Znz8iwJyHSVPaVfYXiL0w2nSdRtXmdS6WOkkuTyNF%2BtIVSO22aBfqE5WbNpJfjdp8Dsjrn%2BXcGKJY2lMoopHjv7eCYAwD%2FyI3mCAzGCK3YclcBTlpeCbSxoSX2gjanuRJHLBF6adK7Uq7jJTLw3BkrlyJBQwIVql4uejKRuxJaBJTgBNioShK1tDOkv%2F6xIPiykMzV2SelQ4XZZeIgTOEzUl5UMyJRV%2FTkw1ahJpTjVqQjqcaqy%2BNRrdVoGcBM9XZpqxBg9tqS5KyHU0Uo0hR69XDlanlnMW1kHMt9OTklaraco2jwQlrjXiK6XJiw%2B%2BcGo8qhC4PlKujFQDVr9n2jiI0DrFOsU6xTrF3kKxX%2FCIqNdurMBHjoiO1cIR0XaMGvjt6aGupQPoYZkdGpewiMdcqO2nVsId1M6IhLSxB9TOKbQBw51giCuxlz2sP%2BMfgUyGHN0RdDkNGO4S6CMxqGL2CyLb6Q%2FifU1wj%2Bf5GSybtYI%2BdW8AGh2M78wdrlk0ZCtf8BZLjoWUD3T0sPqTCTjQWcePt3ddxOFnnxt03zUENQTBJc5r9rVWZP29Jdi%2BgPXhUUUqjKM1EQ5zZoxCkV3cNbs71l8WjjgYue8BR8zW4fOXu7rW4ceHIw1N8b4NN9nUGC%2FH9ApxTtlQ%2B1GYLI90yPNeSOvlxZEPZdGXsFP9LxQF2UZTEc0hHKIY%2FCNBB%2BkVVn9Y8Ysmr3g33KA%2FczgVq5oeMh0eFtSei6Av1oBexcifF7Mi3xzPJRDrJPBYyruS37H%2BF9HCsOER51ugBdRWCWg1eis1P%2BM5WvlNy9wPepNRb5ql2T2fcS5OBXGaLonrAv5I4a2sD9rUwEfQ%2BotDh3a%2B6Sn2ERGnNjh0ZzEEtdfhqHnfCx8MS8tVTneK5WKPRXBetKJduDr3DBhlrO%2BMHSrIYewgkmgPOzR41gDfobjcs4oafS6M0D3LEHQxjBDvyhQvKebTy3c8nfuf%3C%2Fdiagram%3E%3C%2Fmxfile%3E" version="1.1"><title id="title4255">sequence diagram password reset request</title><metadata id="metadata3141"/><rect id="rect4211" width="645.755" height="444.002" x=".483" y=".483" fill="none" stroke="#000" stroke-dasharray="none" stroke-dashoffset="0" stroke-miterlimit="4" stroke-opacity="1" stroke-width=".967"/><path id="path4090" fill="none" stroke="#000" stroke-dasharray="6 1" stroke-dashoffset="0" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="4" stroke-opacity="1" stroke-width="1" d="m 431.48631,44.468601 0,389.373849"/><text id="text4100" x="365.539" y="98.735" fill="#000" fill-opacity="1" stroke="none" font-family="Sans" font-size="8" font-stretch="normal" font-style="normal" font-variant="normal" font-weight="normal" letter-spacing="0" text-anchor="middle" word-spacing="0" writing-mode="lr-tb" xml:space="preserve" style="text-align:center;line-height:125%;-inkscape-font-specification:Sans"><tspan id="tspan4102" x="365.539" y="98.735">LDAP/UDM (uid=username)</tspan><tspan id="tspan4104" x="365.539" y="108.735">â†’ extAttr pss_addresses</tspan></text><path id="path4056" fill="none" stroke="#000" stroke-dasharray="6 1" stroke-dashoffset="0" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="4" stroke-opacity="1" stroke-width="1" d="m 172.76039,44.468601 0,227.755539"/><g id="g4068" transform="translate(-2.7983388,4.2860936)"><rect id="rect4062" width="69.067" height="27.192" x="140.94" y="28.743" fill="#fff" fill-opacity="1" stroke="#000" stroke-dasharray="none" stroke-dashoffset="0" stroke-miterlimit="4" stroke-opacity="1" stroke-width="1"/><text id="text4058" x="175.476" y="40.863" fill="#000" fill-opacity="1" stroke="none" font-family="Sans" font-size="12" font-stretch="normal" font-style="normal" font-variant="normal" font-weight="normal" letter-spacing="0" text-anchor="middle" word-spacing="0" writing-mode="lr-tb" xml:space="preserve" style="text-align:center;line-height:125%;-inkscape-font-specification:Sans"><tspan id="tspan4060" x="175.476" y="40.863">frontend</tspan><tspan id="tspan3164" x="175.476" y="51.876" fill="gray" fill-opacity="1" font-family="Sans" font-size="8" font-stretch="normal" font-style="normal" font-variant="normal" font-weight="normal" text-anchor="middle" writing-mode="lr-tb" style="text-align:center;line-height:125%;-inkscape-font-specification:Sans">(all UCS roles)</tspan></text></g><path id="path4078" fill="none" stroke="#000" stroke-dasharray="6 1" stroke-dashoffset="0" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="4" stroke-opacity="1" stroke-width="1" d="m 303.21966,57.624154 0,323.047926"/><g id="g4074" transform="translate(-3.1007942,4.2860936)"><rect id="rect4082" width="69.067" height="36.494" x="271.787" y="19.44" fill="#fff" fill-opacity="1" stroke="#000" stroke-dasharray="none" stroke-dashoffset="0" stroke-miterlimit="4" stroke-opacity="1" stroke-width="1"/><text id="text4084" x="306.32" y="30.907" fill="#000" fill-opacity="1" stroke="none" font-family="Sans" font-size="12" font-stretch="normal" font-style="normal" font-variant="normal" font-weight="normal" letter-spacing="0" text-anchor="middle" word-spacing="0" writing-mode="lr-tb" xml:space="preserve" style="text-align:center;line-height:125%;-inkscape-font-specification:Sans"><tspan id="tspan4086" x="306.32" y="30.907">backend</tspan><tspan id="tspan3166" x="306.32" y="41.92" fill="gray" fill-opacity="1" font-family="Sans" font-size="8" font-stretch="normal" font-style="normal" font-variant="normal" font-weight="normal" text-anchor="middle" writing-mode="lr-tb" style="text-align:center;line-height:125%;-inkscape-font-specification:Sans">(DC master</tspan><tspan id="tspan3168" x="306.32" y="51.92" fill="gray" fill-opacity="1" font-family="Sans" font-size="8" font-stretch="normal" font-style="normal" font-variant="normal" font-weight="normal" text-anchor="middle" writing-mode="lr-tb" style="text-align:center;line-height:125%;-inkscape-font-specification:Sans">or backup)</tspan></text></g><g id="g4273" transform="translate(-7.6279755,55.736713)"><text id="text4257" x="25.545" y="154.353" fill="#000" fill-opacity="1" stroke="none" font-family="Sans" font-size="12" font-stretch="normal" font-style="normal" font-variant="normal" font-weight="normal" letter-spacing="0" text-anchor="start" word-spacing="0" writing-mode="lr-tb" xml:space="preserve" style="text-align:start;line-height:125%;-inkscape-font-specification:Sans"><tspan id="tspan4259" x="25.545" y="154.353">user</tspan></text><g id="g4106" transform="translate(-1.3491226,-32.871974)"><ellipse id="ellipse2991" cx="40" cy="123" fill="#fff" stroke="#000" d="m 47.5,123 c 0,4.14214 -3.357864,7.5 -7.5,7.5 -4.142136,0 -7.5,-3.35786 -7.5,-7.5 0,-4.14214 3.357864,-7.5 7.5,-7.5 4.142136,0 7.5,3.35786 7.5,7.5 z" pointer-events="none" rx="7.5" ry="7.5" transform="translate(0.5,0.5)"/><path id="path2993" fill="none" stroke="#000" stroke-miterlimit="10" d="m 40.5,130.5 0,25 m 0,-20 -15,0 m 15,0 15,0 m -15,20 -15,20 m 15,-20 15,20" pointer-events="none"/></g></g><rect id="rect3003" width="10" height="312.055" x="167.76" y="79.702" fill="#fff" stroke="#000" pointer-events="none"/><g id="g4048" transform="translate(12.345589,34.201934)"><path id="path3013" fill="none" stroke="#000" stroke-miterlimit="10" d="M 37.24722,101.92702 69.153042,52.314404 C 77.286098,45.445872 77.515373,45.5 86.313836,45.5 l 61.066164,0" pointer-events="none"/><path id="path3015" fill="#000" stroke="#000" stroke-miterlimit="10" d="m 154.38,45.5 -7,3.5 0,-7 z" pointer-events="none"/></g><g id="g4052" transform="translate(12.345589,-1.9758522)"><path id="path3025" fill="none" stroke="#000" stroke-dasharray="3 3" stroke-miterlimit="10" d="m 154.84102,393.62457 -61.34102,0 c -7.441866,0 -7.746338,0.0246 -16.223592,-5.93401 L 37.55334,216.94967" pointer-events="none"/><path id="path3027" fill="none" stroke="#000" stroke-miterlimit="10" d="m 42.333852,219.45075 -5.582067,-4.61004 -1.831348,7.58002" pointer-events="none"/></g><rect id="rect3037" width="9.96" height="290.592" x="298.22" y="94.783" fill="#fff" stroke="#000" pointer-events="none"/><g id="g4044" transform="translate(12.345589,50.201934)"><path id="path3047" fill="none" stroke="#000" stroke-miterlimit="10" d="m 165.5,45.5 111.88,0" pointer-events="none"/><path id="path3049" fill="#000" stroke="#000" stroke-miterlimit="10" d="m 284.38,45.5 -7,3.5 0,-7 z" pointer-events="none"/></g><rect id="rect3071" width="10.822" height="30.859" x="426.075" y="112.324" fill="#fff" stroke="#000" pointer-events="none"/><g id="g4040" transform="translate(20.083799,52.201934)"><path id="path3081" fill="none" stroke="#000" stroke-miterlimit="10" d="M 288.30994,60.5 397.38,60.5" pointer-events="none"/><path id="path3083" fill="#000" stroke="#000" stroke-miterlimit="10" d="m 404.38,60.5 -7,3.5 0,-7 z" pointer-events="none"/></g><g id="g4036" transform="translate(12.345589,-102.33881)"><path id="path3093" fill="none" stroke="#000" stroke-dasharray="3 3" stroke-miterlimit="10" d="M 413.85741,245.5 297.74,245.5" pointer-events="none"/><path id="path3095" fill="none" stroke="#000" stroke-miterlimit="10" d="m 305.62,241 -9,4.5 9,4.5" pointer-events="none"/></g><text id="text4028" x="5.527" y="65.001" fill="#000" fill-opacity="1" stroke="none" font-family="Sans" font-size="8" font-stretch="normal" font-style="normal" font-variant="normal" font-weight="normal" letter-spacing="0" text-anchor="start" word-spacing="0" writing-mode="lr-tb" xml:space="preserve" style="text-align:start;line-height:125%;-inkscape-font-specification:Sans"><tspan id="tspan4030" x="5.527" y="65.001">HTTP POST /password/request</tspan><tspan id="tspan4341" x="5.527" y="75.001">{username: &lt;str&gt;, method:</tspan><tspan id="tspan4345" x="5.527" y="85.001">&lt;str: email/sms&gt;}</tspan></text><text id="text4130" x="328.203" y="130.528" fill="#000" fill-opacity="1" stroke="none" font-family="Sans" font-size="8" font-stretch="normal" font-style="normal" font-variant="normal" font-weight="normal" letter-spacing="0" text-anchor="start" word-spacing="0" writing-mode="lr-tb" xml:space="preserve" style="text-align:start;line-height:125%;-inkscape-font-specification:Sans"><tspan id="tspan4134" x="328.203" y="130.528">email address / </tspan><tspan id="tspan4176" x="328.203" y="140.528">phone number /</tspan><tspan id="tspan4209" x="328.203" y="150.528">both / none</tspan></text><text id="text4100-5" x="237.631" y="79.708" fill="#000" fill-opacity="1" stroke="none" font-family="Sans" font-size="8" font-stretch="normal" font-style="normal" font-variant="normal" font-weight="normal" letter-spacing="0" text-anchor="middle" word-spacing="0" writing-mode="lr-tb" xml:space="preserve" style="text-align:center;line-height:150%;-inkscape-font-specification:Sans"><tspan id="tspan4104-3" x="237.631" y="79.708">UMCP</tspan><tspan id="tspan4164" x="237.631" y="91.708">send_token(username,</tspan><tspan id="tspan3417" x="237.631" y="103.708"> method)</tspan></text><g id="g4438" transform="translate(172.27421,170.51643)"><path id="path3059" fill="none" stroke="#000" stroke-dasharray="3 3" stroke-miterlimit="10" d="m 285.5,370.87778 -117.76,0" pointer-events="none" transform="translate(-159.92862,-155.98534)"/><path id="path3061" fill="none" stroke="#000" stroke-miterlimit="10" d="m 176.03111,366.37778 -9,4.5 9,4.5" pointer-events="none" transform="translate(-159.92862,-155.98534)"/><text id="text4166" x="68.07" y="224.029" fill="#000" fill-opacity="1" stroke="none" font-family="Sans" font-size="8" font-stretch="normal" font-style="normal" font-variant="normal" font-weight="normal" letter-spacing="0" text-anchor="middle" word-spacing="0" writing-mode="lr-tb" xml:space="preserve" style="text-align:center;line-height:125%;-inkscape-font-specification:Sans"><tspan id="tspan4170" x="68.07" y="224.029">OK / fail(SEND)</tspan></text></g><text id="text4199" x="43.585" y="391.264" fill="#000" fill-opacity="1" stroke="none" font-family="Sans" font-size="8" font-stretch="normal" font-style="normal" font-variant="normal" font-weight="normal" letter-spacing="0" text-anchor="start" word-spacing="0" writing-mode="lr-tb" xml:space="preserve" style="text-align:start;line-height:125%;-inkscape-font-specification:Sans"><tspan id="tspan4201" x="43.585" y="391.264">HTTP</tspan><tspan id="tspan4203" x="43.585" y="401.264">* page: sending OK or</tspan><tspan id="tspan4207" x="43.585" y="411.264">* page: failed(REASON)</tspan></text><text id="text4213" x="4.553" y="14.777" fill="#000" fill-opacity="1" stroke="none" font-family="Sans" font-size="12" font-stretch="normal" font-style="normal" font-variant="normal" font-weight="normal" letter-spacing="0" text-anchor="start" word-spacing="0" writing-mode="lr-tb" xml:space="preserve" style="text-align:start;line-height:125%;-inkscape-font-specification:Sans"><tspan id="tspan4215" x="4.553" y="14.777">sd password reset request</tspan></text><path id="path4280" fill="none" stroke="#000" stroke-linecap="butt" stroke-linejoin="miter" stroke-opacity="1" stroke-width="1" d="m 0.54815274,20.533153 162.89835726,0 3.76483,-3.95863 0,-16.44444557"/><text id="text4408" x="310.649" y="177.395" fill="#000" fill-opacity="1" stroke="none" font-family="Sans" font-size="8" font-stretch="normal" font-style="normal" font-variant="normal" font-weight="normal" letter-spacing="0" text-anchor="start" word-spacing="0" writing-mode="lr-tb" xml:space="preserve" style="text-align:start;line-height:150%;-inkscape-font-specification:Sans"><tspan id="tspan4446" x="310.649" y="177.395">SQL INSERT (uid=username,</tspan><tspan id="tspan9069" x="310.649" y="189.395"> pss_token=sms:s3cr3t)</tspan></text><g id="g4416" transform="translate(20.083799,119.62416)"><path id="path4418" fill="none" stroke="#000" stroke-miterlimit="10" d="m 288.21304,60.5 182.89289,0" pointer-events="none"/><path id="path4420" fill="#000" stroke="#000" stroke-miterlimit="10" d="m 478.10593,60.5 -7,3.5 0,-7 z" pointer-events="none"/></g><g id="g4422" transform="translate(12.345589,-34.916589)"><path id="path4424" fill="none" stroke="#000" stroke-dasharray="3 3" stroke-miterlimit="10" d="M 487.44629,245.5 297.74,245.5" pointer-events="none"/><path id="path4426" fill="none" stroke="#000" stroke-miterlimit="10" d="m 305.62,241 -9,4.5 9,4.5" pointer-events="none"/></g><text id="text4428" x="352.539" y="220.972" fill="#000" fill-opacity="1" stroke="none" font-family="Sans" font-size="8" font-stretch="normal" font-style="normal" font-variant="normal" font-weight="normal" letter-spacing="0" text-anchor="start" word-spacing="0" writing-mode="lr-tb" xml:space="preserve" style="text-align:start;line-height:125%;-inkscape-font-specification:Sans"><tspan id="tspan4434" x="352.539" y="220.972">OK / fail</tspan></text><text id="text3447" x="310.587" y="287.024" fill="#000" fill-opacity="1" stroke="none" font-family="Sans" font-size="6" font-stretch="normal" font-style="normal" font-variant="normal" font-weight="normal" letter-spacing="0" text-anchor="start" word-spacing="0" writing-mode="lr-tb" xml:space="preserve" style="text-align:start;line-height:125%;-inkscape-font-specification:Sans"><tspan id="tspan3473" x="310.587" y="287.024">Popen(send_sms, number, s3cr3t) or</tspan><tspan id="tspan3477" x="310.587" y="294.524">Popen(send_email, address, s3cr3t)</tspan></text><g id="g3455" transform="translate(20.083799,239.12046)"><path id="path3457" fill="none" stroke="#000" stroke-miterlimit="10" d="m 288.21304,60.5 12.96695,0" pointer-events="none"/><path id="path3459" fill="#000" stroke="#000" stroke-miterlimit="10" d="m 308.17999,60.5 -7,3.5 0,-7 z" pointer-events="none"/></g><path id="path3463" fill="none" stroke="#000" stroke-dasharray="3 3" stroke-miterlimit="10" d="m 329.93015,299.79452 -0.16055,44.67408 -18.86179,0" pointer-events="none"/><path id="path3465" fill="none" stroke="#000" stroke-miterlimit="10" d="m 318.78781,339.9686 -9,4.5 9,4.5" pointer-events="none"/><text id="text3467" x="310.581" y="354.583" fill="#000" fill-opacity="1" stroke="none" font-family="Sans" font-size="6" font-stretch="normal" font-style="normal" font-variant="normal" font-weight="normal" letter-spacing="0" text-anchor="start" word-spacing="0" writing-mode="lr-tb" xml:space="preserve" style="text-align:start;line-height:125%;-inkscape-font-specification:Sans"><tspan id="tspan3469" x="310.581" y="354.583">OK / fail</tspan></text><g id="g3479" transform="translate(172.27421,9.563952)"><path id="path3481" fill="none" stroke="#000" stroke-dasharray="3 3" stroke-miterlimit="10" d="m 285.5,370.87778 -117.76,0" pointer-events="none" transform="translate(-159.92862,-155.98534)"/><path id="path3483" fill="none" stroke="#000" stroke-miterlimit="10" d="m 175.62,366.37778 -9,4.5 9,4.5" pointer-events="none" transform="translate(-159.92862,-155.98534)"/><text id="text3485" x="68.07" y="224.029" fill="#000" fill-opacity="1" stroke="none" font-family="Sans" font-size="8" font-stretch="normal" font-style="normal" font-variant="normal" font-weight="normal" letter-spacing="0" text-anchor="middle" word-spacing="0" writing-mode="lr-tb" xml:space="preserve" style="text-align:center;line-height:125%;-inkscape-font-specification:Sans"><tspan id="tspan3487" x="68.07" y="224.029">fail(DB)</tspan></text></g><g id="g3489" transform="translate(172.27421,-59.407858)"><path id="path3491" fill="none" stroke="#000" stroke-dasharray="3 3" stroke-miterlimit="10" d="m 285.5,370.87778 -117.76,0" pointer-events="none" transform="translate(-159.92862,-155.98534)"/><path id="path3493" fill="none" stroke="#000" stroke-miterlimit="10" d="m 175.62,366.37778 -9,4.5 9,4.5" pointer-events="none" transform="translate(-159.92862,-155.98534)"/><text id="text3495" x="68.07" y="224.029" fill="#000" fill-opacity="1" stroke="none" font-family="Sans" font-size="8" font-stretch="normal" font-style="normal" font-variant="normal" font-weight="normal" letter-spacing="0" text-anchor="middle" word-spacing="0" writing-mode="lr-tb" xml:space="preserve" style="text-align:center;line-height:125%;-inkscape-font-specification:Sans"><tspan id="tspan3497" x="68.07" y="224.029">fail(CONTACT)</tspan></text></g><g id="g3499" transform="translate(-157.08283,110.31705)"><rect id="rect3501" width="36.32" height="40.976" x="377.579" y="64.5" fill="none" stroke="gray" stroke-dasharray="none" stroke-dashoffset="0" stroke-miterlimit="4" stroke-opacity="1" stroke-width=".5"/><text id="text3503" x="380.564" y="71.069" fill="gray" fill-opacity="1" stroke="none" font-family="Sans" font-size="6" font-stretch="normal" font-style="normal" font-variant="normal" font-weight="normal" letter-spacing="0" text-anchor="start" word-spacing="0" writing-mode="lr-tb" xml:space="preserve" style="text-align:start;line-height:125%;-inkscape-font-specification:Sans"><tspan id="tspan3509" x="380.564" y="71.069">not UML</tspan><tspan id="tspan3518" x="380.564" y="78.569">conform,</tspan><tspan id="tspan3520" x="380.564" y="86.069">but to lazy</tspan><tspan id="tspan3522" x="380.564" y="93.569">to draw 8</tspan><tspan id="tspan3524" x="380.564" y="101.069">graphs</tspan></text></g><rect id="rect3526" width="8.912" height="27.516" x="325.376" y="307.14" fill="#fff" stroke="#000" stroke-dasharray="none" stroke-miterlimit="4" stroke-opacity="1" stroke-width="1" pointer-events="none"/><text id="text4302" x="442.681" y="304.209" fill="#000" fill-opacity="1" stroke="none" font-family="Sans" font-size="6" font-stretch="normal" font-style="normal" font-variant="normal" font-weight="normal" letter-spacing="0" text-anchor="start" word-spacing="0" writing-mode="lr-tb" xml:space="preserve" style="text-align:start;line-height:150%;-inkscape-font-specification:Sans"><tspan id="tspan4400" x="442.681" y="304.209">send_email(address, s3cr3t) or</tspan><tspan id="tspan4408" x="442.681" y="313.209">send_sms(number, s3cr3t)</tspan></text><text id="text4354" x="472.783" y="341.84" fill="#000" fill-opacity="1" stroke="none" font-family="Sans" font-size="6" font-stretch="normal" font-style="normal" font-variant="normal" font-weight="normal" letter-spacing="0" text-anchor="start" word-spacing="0" writing-mode="lr-tb" xml:space="preserve" style="text-align:start;line-height:125%;-inkscape-font-specification:Sans"><tspan id="tspan4358" x="472.783" y="341.84">OK / fail</tspan></text><path id="path4364" fill="none" stroke="#000" stroke-dasharray="6 1" stroke-dashoffset="0" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="4" stroke-opacity="1" stroke-width="1" d="m 587.03685,44.468601 0,389.373849"/><g id="g4366" transform="translate(152.44973,-20.160207)"><rect id="rect4368" width="100.311" height="52.026" x="385.254" y="28.355" fill="#fff" fill-opacity="1" stroke="#000" stroke-dasharray="none" stroke-dashoffset="0" stroke-miterlimit="4" stroke-opacity="1" stroke-width="1"/><text id="text4370" x="435.02" y="40.042" fill="#000" fill-opacity="1" stroke="none" font-family="Sans" font-size="12" font-stretch="normal" font-style="normal" font-variant="normal" font-weight="normal" letter-spacing="0" text-anchor="middle" word-spacing="0" writing-mode="lr-tb" xml:space="preserve" style="text-align:center;line-height:125%;-inkscape-font-specification:Sans"><tspan id="tspan4372" x="435.02" y="40.042">SMTP server or</tspan><tspan font-stretch="normal" style="text-align:center;line-height:125%;-inkscape-font-specification:Sans" id="tspan4374" x="435.02" y="55.042" fill="#000" fill-opacity="1" font-family="Sans" font-size="12" font-style="normal" font-variant="normal" font-weight="normal" text-anchor="middle" writing-mode="lr-tb">SMS gateway</tspan><tspan font-stretch="normal" style="text-align:center;line-height:125%;-inkscape-font-specification:Sans" id="tspan3414" x="435.02" y="66.055" fill="gray" fill-opacity="1" font-family="Sans" font-size="8" font-style="normal" font-variant="normal" font-weight="normal" text-anchor="middle" writing-mode="lr-tb">(UCS SMTP service or</tspan><tspan font-stretch="normal" style="text-align:center;line-height:125%;-inkscape-font-specification:Sans" id="tspan3416" x="435.02" y="76.055" fill="gray" fill-opacity="1" font-family="Sans" font-size="8" font-style="normal" font-variant="normal" font-weight="normal" text-anchor="middle" writing-mode="lr-tb">external service)</tspan></text></g><rect id="rect4380" width="10.822" height="26.872" x="581.626" y="307.824" fill="#fff" stroke="#000" pointer-events="none"/><g id="g4382" transform="translate(62.52592,246.82599)"><path id="path4384" fill="none" stroke="#000" stroke-miterlimit="10" d="m 272.17971,60.5 238.25711,0" pointer-events="none"/><path id="path4386" fill="#000" stroke="#000" stroke-miterlimit="10" d="m 517.43682,60.5 -7,3.5 0,-7 z" pointer-events="none"/></g><path id="path4390" fill="none" stroke="#000" stroke-dasharray="3 3" stroke-miterlimit="10" d="m 581.05,334.68445 -243.97422,0" pointer-events="none"/><path id="path4392" fill="none" stroke="#000" stroke-miterlimit="10" d="m 344.95578,330.18445 -9,4.5 9,4.5" pointer-events="none"/><text id="text4731" x="310.649" y="376.059" fill="gray" fill-opacity="1" stroke="none" font-family="Sans" font-size="8" font-stretch="normal" font-style="normal" font-variant="normal" font-weight="normal" letter-spacing="0" text-anchor="start" word-spacing="0" writing-mode="lr-tb" xml:space="preserve" style="text-align:start;line-height:125%;-inkscape-font-specification:Sans"><tspan id="tspan4735" x="310.649" y="376.059">if fail:</tspan><tspan id="tspan4480" x="310.649" y="386.059"> SQL DELETE (uid=username)</tspan></text><g id="g4952" transform="translate(73.725927,31.96652)"><path id="path4947" fill="none" stroke="gray" stroke-miterlimit="10" stroke-opacity="1" d="m 415.3847,341.87154 9,4.5 -9,4.5" pointer-events="none"/><g id="g4739" transform="translate(20.083799,285.79014)"><path id="path4741" fill="none" stroke="gray" stroke-miterlimit="10" stroke-opacity="1" d="m 214.76119,60.5 187.14103,0" pointer-events="none"/></g></g><g id="g4461" fill="#fff" fill-opacity="1" transform="translate(60.465487,-0.4088782)"><g id="g4187"><path id="path4467" fill="none" stroke="gray" stroke-dasharray="none" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="4" stroke-opacity="1" stroke-width=".5" d="M 439.12848,72.447768 383.33569,84.441851" transform="translate(-60.465487,4.419842)"/><rect id="rect4453" width="35.545" height="25.08" x="377.579" y="64.5" fill="#fff" fill-opacity="1" stroke="gray" stroke-dasharray="none" stroke-dashoffset="0" stroke-miterlimit="4" stroke-opacity="1" stroke-width=".5"/><text id="text4455" x="380.564" y="71.069" fill="gray" fill-opacity="1" stroke="none" font-family="Sans" font-size="6" font-stretch="normal" font-style="normal" font-variant="normal" font-weight="normal" letter-spacing="0" text-anchor="start" word-spacing="0" writing-mode="lr-tb" xml:space="preserve" style="text-align:start;line-height:125%;-inkscape-font-specification:Sans"><tspan id="tspan4457" x="380.564" y="71.069">check</tspan><tspan id="tspan4469" x="380.564" y="78.569">validity</tspan><tspan id="tspan4459" x="380.564" y="86.069">of request</tspan></text></g></g><g id="g5942" transform="translate(6.2231257,0.0514414)"><g id="g2168" fill="#fff" fill-opacity="1" stroke="#000" stroke-dasharray="none" stroke-miterlimit="10.433" stroke-width="1.001" transform="matrix(0.85205637,0,0,-0.83116457,359.29709,98.39693)" xml:space="preserve"><path id="path2170" fill="#fff" fill-opacity="1" stroke-dasharray="none" stroke-miterlimit="10.433" stroke-width="1.001" d="m 50.398,50.398 v 40.5 c 0,2.485 12.102,4.5 27,4.5 14.899,0 27.002,-2.015 27.002,-4.5 v -40.5 c 0,-2.48 -12.103,-4.5 -27.002,-4.5 -14.898,0 -27,2.02 -27,4.5 z"/><path id="path2172" fill="#fff" fill-opacity="1" stroke-dasharray="none" stroke-miterlimit="10.433" stroke-width="1.001" d="m 50.398,90.898 0.036,-0.231 0.104,-0.228 0.172,-0.225 0.237,-0.221 0.302,-0.218 0.364,-0.213 0.425,-0.209 0.484,-0.204 0.541,-0.199 0.597,-0.194 0.65,-0.189 0.703,-0.182 0.753,-0.177 0.802,-0.17 0.849,-0.163 0.894,-0.157 0.938,-0.149 0.98,-0.141 1.021,-0.134 1.058,-0.126 1.096,-0.117 1.13,-0.108 1.165,-0.1 1.195,-0.09 1.226,-0.081 1.254,-0.071 1.281,-0.061 1.306,-0.05 1.329,-0.04 1.35,-0.028 1.37,-0.018 1.388,-0.006 c 14.899,0 27.002,2.02 27.002,4.5"/></g><text id="text4096-6" x="425.344" y="39.878" fill="#000" fill-opacity="1" stroke="none" font-family="Sans" font-size="12" font-stretch="normal" font-style="normal" font-variant="normal" font-weight="normal" letter-spacing="0" text-anchor="middle" word-spacing="0" writing-mode="lr-tb" xml:space="preserve" style="text-align:center;line-height:125%;-inkscape-font-specification:Sans"><tspan id="tspan4098-7" x="425.344" y="39.878">LDAP</tspan><tspan id="tspan3170-1" x="425.344" y="50.891" fill="gray" fill-opacity="1" font-family="Sans" font-size="8" font-stretch="normal" font-style="normal" font-variant="normal" font-weight="normal" text-anchor="middle" writing-mode="lr-tb" style="text-align:center;line-height:125%;-inkscape-font-specification:Sans">(localhost)</tspan></text></g><path id="path8543" fill="none" stroke="#000" stroke-dasharray="6 1" stroke-dashoffset="0" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="4" stroke-opacity="1" stroke-width="1" d="m 505.46853,44.468601 0,389.373849"/><g id="g8545" transform="translate(80.223126,0.0514414)"><g id="g8547" fill="#fff" fill-opacity="1" stroke="#000" stroke-dasharray="none" stroke-miterlimit="10.433" stroke-width="1.001" transform="matrix(0.85205637,0,0,-0.83116457,359.29709,98.39693)" xml:space="preserve"><path id="path8549" fill="#fff" fill-opacity="1" stroke-dasharray="none" stroke-miterlimit="10.433" stroke-width="1.001" d="m 50.398,50.398 v 40.5 c 0,2.485 12.102,4.5 27,4.5 14.899,0 27.002,-2.015 27.002,-4.5 v -40.5 c 0,-2.48 -12.103,-4.5 -27.002,-4.5 -14.898,0 -27,2.02 -27,4.5 z"/><path id="path8551" fill="#fff" fill-opacity="1" stroke-dasharray="none" stroke-miterlimit="10.433" stroke-width="1.001" d="m 50.398,90.898 0.036,-0.231 0.104,-0.228 0.172,-0.225 0.237,-0.221 0.302,-0.218 0.364,-0.213 0.425,-0.209 0.484,-0.204 0.541,-0.199 0.597,-0.194 0.65,-0.189 0.703,-0.182 0.753,-0.177 0.802,-0.17 0.849,-0.163 0.894,-0.157 0.938,-0.149 0.98,-0.141 1.021,-0.134 1.058,-0.126 1.096,-0.117 1.13,-0.108 1.165,-0.1 1.195,-0.09 1.226,-0.081 1.254,-0.071 1.281,-0.061 1.306,-0.05 1.329,-0.04 1.35,-0.028 1.37,-0.018 1.388,-0.006 c 14.899,0 27.002,2.02 27.002,4.5"/></g><text id="text8553" x="425.344" y="39.878" fill="#000" fill-opacity="1" stroke="none" font-family="Sans" font-size="12" font-stretch="normal" font-style="normal" font-variant="normal" font-weight="normal" letter-spacing="0" text-anchor="middle" word-spacing="0" writing-mode="lr-tb" xml:space="preserve" style="text-align:center;line-height:125%;-inkscape-font-specification:Sans"><tspan id="tspan8555" x="425.344" y="39.878">PgSQL</tspan><tspan font-stretch="normal" style="text-align:center;line-height:125%;-inkscape-font-specification:Sans" id="tspan8557" x="425.344" y="50.891" fill="gray" fill-opacity="1" font-family="Sans" font-size="8" font-style="normal" font-variant="normal" font-weight="normal" text-anchor="middle" writing-mode="lr-tb">(localhost)</tspan></text></g><rect id="rect4414" width="10.822" height="30.859" x="500.057" y="179.746" fill="#fff" stroke="#000" pointer-events="none"/><g id="g3673" transform="translate(20.083799,176.08342)"><path id="path3675" fill="none" stroke="gray" stroke-miterlimit="10" stroke-opacity="1" d="m 288.21304,60.5 182.89289,0" pointer-events="none"/><path id="path3677" fill="gray" fill-opacity="1" stroke="gray" stroke-miterlimit="10" stroke-opacity="1" d="m 478.10593,60.5 -7,3.5 0,-7 z" pointer-events="none"/></g><g id="g3679" transform="translate(12.345589,21.542671)"><path id="path3681" fill="none" stroke="gray" stroke-dasharray="3 3" stroke-miterlimit="10" stroke-opacity="1" d="M 487.44629,245.5 297.74,245.5" pointer-events="none"/><path id="path3683" fill="none" stroke="gray" stroke-miterlimit="10" stroke-opacity="1" d="m 305.62,241 -9,4.5 9,4.5" pointer-events="none"/></g><text id="text3685" x="352.539" y="277.432" fill="gray" fill-opacity="1" stroke="none" font-family="Sans" font-size="8" font-stretch="normal" font-style="normal" font-variant="normal" font-weight="normal" letter-spacing="0" text-anchor="start" word-spacing="0" writing-mode="lr-tb" xml:space="preserve" style="text-align:start;line-height:125%;-inkscape-font-specification:Sans"><tspan id="tspan3687" x="352.539" y="277.432">OK / fail</tspan></text><rect id="rect3689" width="10.822" height="30.859" x="500.057" y="236.206" fill="#fff" stroke="gray" stroke-opacity="1" pointer-events="none"/><g id="g4465" transform="translate(172.27421,62.734323)"><path id="path4468" fill="none" stroke="#000" stroke-dasharray="3 3" stroke-miterlimit="10" d="m 285.5,370.87778 -117.76,0" pointer-events="none" transform="translate(-159.92862,-155.98534)"/><path id="path4470" fill="none" stroke="#000" stroke-miterlimit="10" d="m 175.62,366.37778 -9,4.5 9,4.5" pointer-events="none" transform="translate(-159.92862,-155.98534)"/><text id="text4472" x="68.07" y="224.029" fill="#000" fill-opacity="1" stroke="none" font-family="Sans" font-size="8" font-stretch="normal" font-style="normal" font-variant="normal" font-weight="normal" letter-spacing="0" text-anchor="middle" word-spacing="0" writing-mode="lr-tb" xml:space="preserve" style="text-align:center;line-height:125%;-inkscape-font-specification:Sans"><tspan id="tspan4474" x="68.07" y="224.029">fail(DB / RESET_RATE)</tspan></text></g><rect id="rect4737" width="10.822" height="29.969" x="500.212" y="378.694" fill="#fff" stroke="gray" stroke-opacity="1" pointer-events="none"/><text id="text3667" x="310.649" y="233.306" fill="#000" fill-opacity="1" stroke="none" font-family="Sans" font-size="8" font-stretch="normal" font-style="normal" font-variant="normal" font-weight="normal" letter-spacing="0" text-anchor="start" word-spacing="0" writing-mode="lr-tb" xml:space="preserve" style="text-align:start;line-height:129.99999523%;-inkscape-font-specification:Sans"><tspan font-stretch="normal" style="text-align:start;line-height:129.99999523%;-inkscape-font-specification:Sans" id="tspan3669" x="310.649" y="233.306" fill="gray" fill-opacity="1" font-family="Sans" font-size="8" font-style="normal" font-variant="normal" font-weight="normal" text-anchor="start" writing-mode="lr-tb">if fail &amp;&amp; timedelta &lt; max_user_reset_rate:</tspan><tspan font-stretch="normal" style="text-align:start;line-height:129.99999523%;-inkscape-font-specification:Sans" id="tspan3691" x="310.649" y="243.706" fill="gray" fill-opacity="1" font-family="Sans" font-size="8" font-style="normal" font-variant="normal" font-weight="normal" text-anchor="start" writing-mode="lr-tb"> SQL UPDATE (uid=username,</tspan><tspan font-stretch="normal" style="text-align:start;line-height:129.99999523%;-inkscape-font-specification:Sans" id="tspan4478" x="310.649" y="254.106" fill="gray" fill-opacity="1" font-family="Sans" font-size="8" font-style="normal" font-variant="normal" font-weight="normal" text-anchor="start" writing-mode="lr-tb"> pss_token=sms:s3cr3t)</tspan></text></svg>